
![](image/Pasted%20image%2020250305160425.png)

# 为什么学习GO

## 语言对比

### c / cpp

![](image/Pasted%20image%2020250305160732.png)

![](image/Pasted%20image%2020250305160751.png)

### Java

![](image/Pasted%20image%2020250305161012.png)

![](image/Pasted%20image%2020250305161027.png)

### JS

![](image/Pasted%20image%2020250305161149.png)

![](image/Pasted%20image%2020250305161201.png)

### GO

![](image/Pasted%20image%2020250305161313.png)

![](image/Pasted%20image%2020250305161332.png)

## 优秀 GO 语言项目

![](image/Pasted%20image%2020250305161435.png)

## 总结

![](image/Pasted%20image%2020250305161644.png)

# 何为 Runtime

## 很多语言都有Runtime

![](image/Pasted%20image%2020250305163425.png)

## Go 的 Runtime 特点

![](image/Pasted%20image%2020250305163509.png)

![](image/Pasted%20image%2020250305163526.png)

## Go 的 Runtime 能力

![](image/Pasted%20image%2020250305172416.png)

## Go 的 Runtime 其他特点

![](image/Pasted%20image%2020250305172558.png)

## 总结

![](image/Pasted%20image%2020250305172704.png)

# Go 是如何编译

## Hello World

代码

```go
package main  
  
import (  
    "fmt"  
)  
  
func main() {  
    fmt.Println("Hello World")  
}
```

使用参数

```shell
go build -n
```

输出结果

```shell

#
# Go-Redis
#

mkdir -p $WORK/b001/
cat >$WORK/b001/importcfg << 'EOF' # internal
# import config
packagefile fmt=/Users/hwl/Library/Caches/go-build/86/86f60612d3d24c40784c6bd59284a034fa6005fd0244a512a45192d91d64a695-d
packagefile runtime=/Users/hwl/Library/Caches/go-build/1c/1c1a481ef6d7700d2ffea6286dfb9d3218f961a025025c237fda9ef97223a71d-d
EOF
cd /Users/hwl/GolandProjects/Go-Redis
/usr/local/opt/go/libexec/pkg/tool/darwin_amd64/compile -o $WORK/b001/_pkg_.a -trimpath "$WORK/b001=>" -p main -lang=go1.16 -complete -buildid 87Xxicsd950mjse1mABB/87Xxicsd950mjse1mABB -goversion go1.24.1 -c=4 -shared -nolocalimports -importcfg $WORK/b001/importcfg -pack ./main.go
/usr/local/opt/go/libexec/pkg/tool/darwin_amd64/buildid -w $WORK/b001/_pkg_.a # internal
cat >$WORK/b001/importcfg.link << 'EOF' # internal
packagefile Go-Redis=$WORK/b001/_pkg_.a
# fmt包
packagefile fmt=/Users/hwl/Library/Caches/go-build/86/86f60612d3d24c40784c6bd59284a034fa6005fd0244a512a45192d91d64a695-d
# 运行时包
packagefile runtime=/Users/hwl/Library/Caches/go-build/1c/1c1a481ef6d7700d2ffea6286dfb9d3218f961a025025c237fda9ef97223a71d-d
packagefile errors=/Users/hwl/Library/Caches/go-build/f1/f1529e1349de4885c68162aacff0c31dd523ef54e16fb0d23291fa6d653f7e09-d
packagefile internal/fmtsort=/Users/hwl/Library/Caches/go-build/9f/9f23bcd494df7512a5a2dd5681ca9eb0795c778147897d3c367a69b95174e6d5-d
packagefile io=/Users/hwl/Library/Caches/go-build/f7/f74eb1cde2839fe3377c19507a42f38f3a1356e78e3c68d848b8cbdde2c6575c-d
packagefile math=/Users/hwl/Library/Caches/go-build/e2/e2e6e39a72b886c705d2a7dcb1f139b9318d0e864601d137c345ef4250a3fc21-d
packagefile os=/Users/hwl/Library/Caches/go-build/88/88b9ca769dc55146946ae1b3b6d444aefb4d37a3fef88e8f1d1a1ad952fa32c6-d
packagefile reflect=/Users/hwl/Library/Caches/go-build/3b/3b1f926aad7912986242853ddc6d4e78369c340820a6b0dc4835349f09ed1d45-d
packagefile slices=/Users/hwl/Library/Caches/go-build/b6/b670f2a87ad7eb02991515b7f346c8b1f7f1d788b31e8b289db86cb3dfac3a93-d
packagefile strconv=/Users/hwl/Library/Caches/go-build/35/35f5f4dad2d28294718c60eed49f09b6c016ef321045e60aa33dd3d7683ce99f-d
packagefile sync=/Users/hwl/Library/Caches/go-build/8a/8a3b9d652c87ac4558f04a6fb17d76e94565123dc718a9e6262e54e39692eaa0-d
packagefile unicode/utf8=/Users/hwl/Library/Caches/go-build/aa/aa7fba5eac9734a035fe94221d20b760991632e69e756ca6f4b9566dccfd6b9d-d
packagefile internal/abi=/Users/hwl/Library/Caches/go-build/d6/d6b37559e2b31b99adfb7ab31a7795e8ac24204bd10fe416c8d9d84771123036-d
packagefile internal/bytealg=/Users/hwl/Library/Caches/go-build/56/56be57472cd5a1487f84b25064c13442f24c7fd06929c242894ebe679f7a8c7d-d
packagefile internal/byteorder=/Users/hwl/Library/Caches/go-build/23/231a5b0da2f8492be1cd3d7739b1207d7428a2a8a80a42027c09efa26c44c5ba-d
packagefile internal/chacha8rand=/Users/hwl/Library/Caches/go-build/ab/abefa1978ac297353e52d67835dc066084f60edf206e16bf51a4d64cd0867ccd-d
packagefile internal/coverage/rtcov=/Users/hwl/Library/Caches/go-build/67/67f6e60051ae6cf9d1a9f4577433afedcd070976580fc3f46d0bb55a02209a92-d
packagefile internal/cpu=/Users/hwl/Library/Caches/go-build/e2/e249e9e821a323d195c13756ad0f7433e726415eb0c595e62f11885476c8156e-d
packagefile internal/goarch=/Users/hwl/Library/Caches/go-build/fe/fe4c504d44ca22e5bb0adbbc303bb5e86fae2115440b3fca1236600d1a04f974-d
packagefile internal/godebugs=/Users/hwl/Library/Caches/go-build/80/80787c474b35b1e3723a304240e613de8fedafb7b78ea35c79f17bb98832aeb8-d
packagefile internal/goexperiment=/Users/hwl/Library/Caches/go-build/7e/7e9ff773875fdb5d65c6dfb9bd89598dc55f1dc759c4c42caf249ed2d4360b87-d
packagefile internal/goos=/Users/hwl/Library/Caches/go-build/9d/9d14aa46411c9ba2344fa1e5d2bdabec6946d258a5a7e1be8cea61b619bc8878-d
packagefile internal/profilerecord=/Users/hwl/Library/Caches/go-build/ef/ef439b467482f4220a0907e9ebd0944ea077cde9a93e099ac658023b4724a41c-d
packagefile internal/runtime/atomic=/Users/hwl/Library/Caches/go-build/e9/e9f5e6d553b3c2fe1cead82e8b43795d707b24b0cd6b183212def88499d19ef5-d
packagefile internal/runtime/exithook=/Users/hwl/Library/Caches/go-build/a3/a3eaaf722826b20dfa40012a02a7de75065ce5c0cc1a65da329c7fcb7f91d99a-d
packagefile internal/runtime/maps=/Users/hwl/Library/Caches/go-build/ea/ea08095b03affbf2b5c79714fa3a0e5597324450489bf7fa388e183fcd37d026-d
packagefile internal/runtime/math=/Users/hwl/Library/Caches/go-build/e8/e873c2b39e8ec94d6a1207630b6363b4fc96555eadb27d03f82d74ea0f7a2ede-d
packagefile internal/runtime/sys=/Users/hwl/Library/Caches/go-build/83/831182ae5216d52556ecffd2142ebc443ce333e2401e163563ea1b36b9ce109c-d
packagefile internal/stringslite=/Users/hwl/Library/Caches/go-build/7b/7bca2b56fe9fda7b9c75816b3f588d331e820cf87c6fb232d7bcbbe096d08cc0-d
packagefile internal/reflectlite=/Users/hwl/Library/Caches/go-build/ff/ff1ce5cf6ba4cd37ab3b5c4745315cec336acf594b0f23418087f159d9df0fa9-d
packagefile cmp=/Users/hwl/Library/Caches/go-build/22/22e74f19c173e60af82bb4b64d9a08495a7faff8c3e8e55318091e1e0457977d-d
packagefile math/bits=/Users/hwl/Library/Caches/go-build/d8/d8a153c1b29056e552785499e063e5b8d79f3d89e2d32f3d9135ec4bdee0aa71-d
packagefile internal/filepathlite=/Users/hwl/Library/Caches/go-build/ef/efb44e2e3b7eaa3e0f5099718dbb02d2ad5b124fc4d2f2a0f9ae25fd0f2c16e6-d
packagefile internal/itoa=/Users/hwl/Library/Caches/go-build/57/57d159a172ace4699d96c1772a8e6ea802a22b0e09bc122a7310a5bfe07e0a27-d
packagefile internal/poll=/Users/hwl/Library/Caches/go-build/91/91bf7fdb2966bc262a271dc8fe9b4b285cab9cd23734a43401105a42408bb70e-d
packagefile internal/syscall/execenv=/Users/hwl/Library/Caches/go-build/67/6736cfcfc61a32f060a9a2f009e0e9a92ae0494d5f3cf917643eccc4b771cce7-d
packagefile internal/syscall/unix=/Users/hwl/Library/Caches/go-build/1b/1bf8e522b81b234c5897b9715caff1cc2024312d32c6d5e0943794b14ac83bd7-d
packagefile internal/testlog=/Users/hwl/Library/Caches/go-build/04/045af27c8fb4645b3644ce36af1fc507c7a80a2a78bcec5b95621c019d243fa0-d
packagefile io/fs=/Users/hwl/Library/Caches/go-build/4d/4d14dd955fe0e416d171b12153530cdd1c99294a7d220fff8a2c6d3a44e6d254-d
packagefile sync/atomic=/Users/hwl/Library/Caches/go-build/ac/ac72b554aefb57c7bcc7d3e9112d4ab5bd65e78ecaffdce08ecf3bcf6f197f93-d
packagefile syscall=/Users/hwl/Library/Caches/go-build/52/5251c898d7b762f0eae293b26fb0a0b14057fc55ee72eceb7af9aa8f74bcd2c8-d
packagefile time=/Users/hwl/Library/Caches/go-build/7d/7d229558ab4eaf014e9895158e16cc4078526350310b1f7fc3ccdb63dd262eb4-d
packagefile internal/race=/Users/hwl/Library/Caches/go-build/a8/a8c1e08c88cdd876cd1645580a748cb06c66ccce71b43a169848be3b7d89f156-d
packagefile internal/unsafeheader=/Users/hwl/Library/Caches/go-build/0a/0aae6c89c4b66b6d073c3c1e0a60da9ca41c3f9fb37c2f315ef200734eead01a-d
packagefile iter=/Users/hwl/Library/Caches/go-build/d3/d3dfd3fdb8e61acc8757144fcac589507aed28597e2cc2f67ed625b3057848dc-d
packagefile unicode=/Users/hwl/Library/Caches/go-build/8f/8fb52ef751de84ba555d37f618f2506ad68e199ab447c68b61e9aa19427f135c-d
packagefile internal/sync=/Users/hwl/Library/Caches/go-build/d5/d5b7ce7556d93d16e0576f550b54b3a24571134a0b778d552b3b7e6510e141e2-d
packagefile internal/asan=/Users/hwl/Library/Caches/go-build/9d/9ded7a2ddd1e853def5c70fd0f7cc528e360cb9f2a6b6d1688507b36043255e4-d
packagefile internal/msan=/Users/hwl/Library/Caches/go-build/f3/f3cdb751b485c193562e0f5a0782d188d0bf593bbbbcf8f6613add913fe1b602-d
packagefile internal/oserror=/Users/hwl/Library/Caches/go-build/8e/8eeb11f5c5377a2cb2d13d725af770af78c2064d2c9f38364d9e916c8d230907-d
packagefile path=/Users/hwl/Library/Caches/go-build/d9/d99fa7e51c561c0c4073b055058f17c55f0726737ab3a63b9aab2eb5741cc29f-d
packagefile internal/godebug=/Users/hwl/Library/Caches/go-build/cd/cd76e4d0ffb6bfcaadab80baab43d3cb68a4b8ffd63fc20b6ecce10b878eea0e-d
packagefile internal/bisect=/Users/hwl/Library/Caches/go-build/c5/c57b4231928220c08c34e53f51d7f409972457e8db30a416cc57af64ad53c0b8-d
modinfo "0w\xaf\f\x92t\b\x02A\xe1\xc1\a\xe6\xd6\x18\xe6path\tGo-Redis\nmod\tGo-Redis\t(devel)\t\nbuild\t-buildmode=exe\nbuild\t-compiler=gc\nbuild\tDefaultGODEBUG=asynctimerchan=1,gotestjsonbuildtext=1,gotypesalias=0,httplaxcontentlength=1,httpmuxgo121=1,httpservecontentkeepheaders=1,multipathtcp=0,netedns0=0,panicnil=1,randseednop=0,rsa1024min=0,tls10server=1,tls3des=1,tlsmlkem=0,tlsrsakex=1,tlsunsafeekm=1,winreadlinkvolume=0,winsymlink=0,x509keypairleaf=0,x509negativeserial=1,x509rsacrt=0,x509usepolicies=0\nbuild\tCGO_ENABLED=1\nbuild\tCGO_CFLAGS=\nbuild\tCGO_CPPFLAGS=\nbuild\tCGO_CXXFLAGS=\nbuild\tCGO_LDFLAGS=\nbuild\tGOARCH=amd64\nbuild\tGOOS=darwin\nbuild\tGOAMD64=v1\n\xf92C1\x86\x18 r\x00\x82B\x10A\x16\xd8\xf2"
EOF
mkdir -p $WORK/b001/exe/
cd .
GOROOT='/usr/local/opt/go/libexec' /usr/local/opt/go/libexec/pkg/tool/darwin_amd64/link -o $WORK/b001/exe/a.out -importcfg $WORK/b001/importcfg.link -X=runtime.godebugDefault=asynctimerchan=1,gotestjsonbuildtext=1,gotypesalias=0,httplaxcontentlength=1,httpmuxgo121=1,httpservecontentkeepheaders=1,multipathtcp=0,netedns0=0,panicnil=1,randseednop=0,rsa1024min=0,tls10server=1,tls3des=1,tlsmlkem=0,tlsrsakex=1,tlsunsafeekm=1,winreadlinkvolume=0,winsymlink=0,x509keypairleaf=0,x509negativeserial=1,x509rsacrt=0,x509usepolicies=0 -buildmode=pie -buildid=a8wlVWK8qHZL6os-kbJg/87Xxicsd950mjse1mABB/87Xxicsd950mjse1mABB/a8wlVWK8qHZL6os-kbJg -extld=cc $WORK/b001/_pkg_.a
/usr/local/opt/go/libexec/pkg/tool/darwin_amd64/buildid -w $WORK/b001/exe/a.out # internal
mv $WORK/b001/exe/a.out Go-Redis
rm -rf $WORK/b001/

```

## 过程

 ![](image/Pasted%20image%2020250305174408.png)
### 词法分析

![](image/Pasted%20image%2020250305174436.png)

### 句法分析
  ![](image/Pasted%20image%2020250305174522.png)

### 语义分析

![](image/Pasted%20image%2020250305174642.png)

### 中间码生产

![](image/Pasted%20image%2020250305174723.png)

![](image/Pasted%20image%2020250305174825.png)


```shell
export GOSSAFUNC=main                           
go build   
# runtime
dumped SSA for main,1 to /Users/hwl/GolandProjects/Go-Redis/ssa.html
# Go-Redis
dumped SSA for main,1 to ./ssa.html
```

![](image/Pasted%20image%2020250305175440.png)

![](image/Pasted%20image%2020250305175647.png)

### 机器码生成

![](image/Pasted%20image%2020250305175828.png)

- 查看 Plan 9 汇编

`go build -gcflags -S main.go`


```txt
# runtime
dumped SSA for main,1 to /Users/hwl/GolandProjects/Go-Redis/ssa.html
# command-line-arguments
dumped SSA for main,1 to ./ssa.html
main.main STEXT size=83 args=0x0 locals=0x40 funcid=0x0 align=0x0
        0x0000 00000 (/Users/hwl/GolandProjects/Go-Redis/main.go:7)     TEXT    main.main(SB), ABIInternal, $64-0
        0x0000 00000 (/Users/hwl/GolandProjects/Go-Redis/main.go:7)     CMPQ    SP, 16(R14)
        0x0004 00004 (/Users/hwl/GolandProjects/Go-Redis/main.go:7)     PCDATA  $0, $-2
        0x0004 00004 (/Users/hwl/GolandProjects/Go-Redis/main.go:7)     JLS     76
        0x0006 00006 (/Users/hwl/GolandProjects/Go-Redis/main.go:7)     PCDATA  $0, $-1
        0x0006 00006 (/Users/hwl/GolandProjects/Go-Redis/main.go:7)     PUSHQ   BP
        0x0007 00007 (/Users/hwl/GolandProjects/Go-Redis/main.go:7)     MOVQ    SP, BP
        0x000a 00010 (/Users/hwl/GolandProjects/Go-Redis/main.go:7)     SUBQ    $56, SP
        0x000e 00014 (/Users/hwl/GolandProjects/Go-Redis/main.go:7)     FUNCDATA        $0, gclocals·FzY36IO2mY0y4dZ1+Izd/w==(SB)
        0x000e 00014 (/Users/hwl/GolandProjects/Go-Redis/main.go:7)     FUNCDATA        $1, gclocals·ynuM6ptGWxUYldU3ztZ9GQ==(SB)
        0x000e 00014 (/Users/hwl/GolandProjects/Go-Redis/main.go:7)     FUNCDATA        $2, main.main.stkobj(SB)
        0x000e 00014 (/Users/hwl/GolandProjects/Go-Redis/main.go:8)     LEAQ    type:string(SB), DX
        0x0015 00021 (/Users/hwl/GolandProjects/Go-Redis/main.go:8)     MOVQ    DX, main..autotmp_8+40(SP)
        0x001a 00026 (/Users/hwl/GolandProjects/Go-Redis/main.go:8)     LEAQ    main..stmp_0(SB), DX
        0x0021 00033 (/Users/hwl/GolandProjects/Go-Redis/main.go:8)     MOVQ    DX, main..autotmp_8+48(SP)
        0x0026 00038 (/usr/local/opt/go/libexec/src/fmt/print.go:314)   MOVQ    os.Stdout(SB), BX
        0x002d 00045 (<unknown line number>)    NOP
        0x002d 00045 (/usr/local/opt/go/libexec/src/fmt/print.go:314)   LEAQ    go:itab.*os.File,io.Writer(SB), AX
        0x0034 00052 (/usr/local/opt/go/libexec/src/fmt/print.go:314)   LEAQ    main..autotmp_8+40(SP), CX
        0x0039 00057 (/usr/local/opt/go/libexec/src/fmt/print.go:314)   MOVL    $1, DI
        0x003e 00062 (/usr/local/opt/go/libexec/src/fmt/print.go:314)   MOVQ    DI, SI
        0x0041 00065 (/usr/local/opt/go/libexec/src/fmt/print.go:314)   PCDATA  $1, $0
        0x0041 00065 (/usr/local/opt/go/libexec/src/fmt/print.go:314)   CALL    fmt.Fprintln(SB)
        0x0046 00070 (/Users/hwl/GolandProjects/Go-Redis/main.go:9)     ADDQ    $56, SP
        0x004a 00074 (/Users/hwl/GolandProjects/Go-Redis/main.go:9)     POPQ    BP
        0x004b 00075 (/Users/hwl/GolandProjects/Go-Redis/main.go:9)     RET
        0x004c 00076 (/Users/hwl/GolandProjects/Go-Redis/main.go:9)     NOP
        0x004c 00076 (/Users/hwl/GolandProjects/Go-Redis/main.go:7)     PCDATA  $1, $-1
        0x004c 00076 (/Users/hwl/GolandProjects/Go-Redis/main.go:7)     PCDATA  $0, $-2
        0x004c 00076 (/Users/hwl/GolandProjects/Go-Redis/main.go:7)     CALL    runtime.morestack_noctxt(SB)
        0x0051 00081 (/Users/hwl/GolandProjects/Go-Redis/main.go:7)     PCDATA  $0, $-1
        0x0051 00081 (/Users/hwl/GolandProjects/Go-Redis/main.go:7)     JMP     0
        0x0000 49 3b 66 10 76 46 55 48 89 e5 48 83 ec 38 48 8d  I;f.vFUH..H..8H.
        0x0010 15 00 00 00 00 48 89 54 24 28 48 8d 15 00 00 00  .....H.T$(H.....
        0x0020 00 48 89 54 24 30 48 8b 1d 00 00 00 00 48 8d 05  .H.T$0H......H..
        0x0030 00 00 00 00 48 8d 4c 24 28 bf 01 00 00 00 48 89  ....H.L$(.....H.
        0x0040 fe e8 00 00 00 00 48 83 c4 38 5d c3 e8 00 00 00  ......H..8].....
        0x0050 00 eb ad                                         ...
        rel 2+0 t=R_USEIFACE type:string+0
        rel 2+0 t=R_USEIFACE type:*os.File+0
        rel 17+4 t=R_PCREL type:string+0
        rel 29+4 t=R_PCREL main..stmp_0+0
        rel 41+4 t=R_PCREL os.Stdout+0
        rel 48+4 t=R_PCREL go:itab.*os.File,io.Writer+0
        rel 66+4 t=R_CALL fmt.Fprintln+0
        rel 77+4 t=R_CALL runtime.morestack_noctxt+0
type:.eq.sync/atomic.Pointer[os.dirInfo] STEXT dupok nosplit size=10 args=0x10 locals=0x0 funcid=0x0 align=0x0
        0x0000 00000 (<autogenerated>:1)        TEXT    type:.eq.sync/atomic.Pointer[os.dirInfo](SB), DUPOK|NOSPLIT|NOFRAME|ABIInternal, $0-16
        0x0000 00000 (<autogenerated>:1)        FUNCDATA        $0, gclocals·rJbr+btbFJy3NLIRCgNSZQ==(SB)
        0x0000 00000 (<autogenerated>:1)        FUNCDATA        $1, gclocals·ISb46fRPFoZ9pIfykFK/kQ==(SB)
        0x0000 00000 (<autogenerated>:1)        FUNCDATA        $5, type:.eq.sync/atomic.Pointer[os.dirInfo].arginfo1(SB)
        0x0000 00000 (<autogenerated>:1)        FUNCDATA        $6, type:.eq.sync/atomic.Pointer[os.dirInfo].argliveinfo(SB)
        0x0000 00000 (<autogenerated>:1)        PCDATA  $3, $1
        0x0000 00000 (<autogenerated>:1)        MOVQ    (AX), CX
        0x0003 00003 (<autogenerated>:1)        CMPQ    (BX), CX
        0x0006 00006 (<autogenerated>:1)        SETEQ   AL
        0x0009 00009 (<autogenerated>:1)        RET
        0x0000 48 8b 08 48 39 0b 0f 94 c0 c3                    H..H9.....
go:cuinfo.producer.main SDWARFCUINFO dupok size=0
        0x0000 2d 73 68 61 72 65 64 20 72 65 67 61 62 69        -shared regabi
go:cuinfo.packagename.main SDWARFCUINFO dupok size=0
        0x0000 6d 61 69 6e                                      main
go:info.fmt.Println$abstract SDWARFABSFCN dupok size=44
        0x0000 05 66 6d 74 2e 50 72 69 6e 74 6c 6e 00 01 b9 02  .fmt.Println....
        0x0010 01 22 61 00 00 00 00 00 00 22 6e 00 01 00 00 00  ."a......"n.....
        0x0020 00 22 65 72 72 00 01 00 00 00 00 00              ."err.......
        rel 0+0 t=R_USETYPE type:[]interface {}+0
        rel 0+0 t=R_USETYPE type:error+0
        rel 0+0 t=R_USETYPE type:int+0
        rel 21+4 t=R_DWARFSECREF go:info.[]interface {}+0
        rel 29+4 t=R_DWARFSECREF go:info.int+0
        rel 39+4 t=R_DWARFSECREF go:info.error+0
go:itab.*os.File,io.Writer SRODATA dupok size=32
        0x0000 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0010 c1 d7 bc cc 00 00 00 00 00 00 00 00 00 00 00 00  ................
        rel 0+8 t=R_ADDR type:io.Writer+0
        rel 8+8 t=R_ADDR type:*os.File+0
        rel 24+8 t=RelocType(-32767) os.(*File).Write+0
sync/atomic..dict.Pointer[os.dirInfo] SRODATA dupok size=128
        0x0000 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0010 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0040 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0050 00 00 00 00 00 00 00 00                          ........
        rel 0+0 t=R_USEIFACE type:*os.dirInfo+0
        rel 0+0 t=R_USEIFACE type:*os.dirInfo+0
        rel 0+0 t=R_USEIFACE type:*os.dirInfo+0
        rel 0+0 t=R_USEIFACE type:*os.dirInfo+0
        rel 0+0 t=R_USEIFACE type:*os.dirInfo+0
        rel 0+0 t=R_USEIFACE type:*os.dirInfo+0
        rel 0+0 t=R_USEIFACE type:unsafe.Pointer+0
        rel 0+0 t=R_USEIFACE type:*sync/atomic.Pointer[os.dirInfo]+0
        rel 0+8 t=R_ADDR type:*sync/atomic.Pointer[os.dirInfo]+0
        rel 0+0 t=R_USEIFACE type:*os.dirInfo+0
        rel 0+0 t=R_USEIFACE type:unsafe.Pointer+0
        rel 0+0 t=R_USEIFACE type:*sync/atomic.Pointer[os.dirInfo]+0
        rel 0+0 t=R_USEIFACE type:*sync/atomic.Pointer[os.dirInfo]+0
        rel 0+0 t=R_USEIFACE type:unsafe.Pointer+0
        rel 0+0 t=R_USEIFACE type:*os.dirInfo+0
        rel 0+0 t=R_USEIFACE type:*os.dirInfo+0
        rel 0+0 t=R_USEIFACE type:*os.dirInfo+0
        rel 0+0 t=R_USEIFACE type:*os.dirInfo+0
        rel 0+0 t=R_USEIFACE type:unsafe.Pointer+0
        rel 0+0 t=R_USEIFACE type:*sync/atomic.Pointer[os.dirInfo]+0
        rel 0+0 t=R_USEIFACE type:unsafe.Pointer+0
        rel 0+0 t=R_USEIFACE type:*os.dirInfo+0
        rel 8+8 t=R_ADDR type:*os.dirInfo+0
        rel 16+8 t=R_ADDR type:*os.dirInfo+0
        rel 24+8 t=R_ADDR type:*sync/atomic.Pointer[os.dirInfo]+0
        rel 32+8 t=R_ADDR type:*os.dirInfo+0
        rel 40+8 t=R_ADDR type:*sync/atomic.Pointer[os.dirInfo]+0
        rel 48+8 t=R_ADDR type:*os.dirInfo+0
        rel 56+8 t=R_ADDR type:*os.dirInfo+0
        rel 64+8 t=R_ADDR type:*os.dirInfo+0
        rel 72+8 t=R_ADDR type:*sync/atomic.Pointer[os.dirInfo]+0
        rel 80+8 t=R_ADDR type:*os.dirInfo+0
main..inittask SNOPTRDATA size=8
        0x0000 00 00 00 00 00 00 00 00                          ........
        rel 0+0 t=R_INITORDER fmt..inittask+0
runtime.memequal64·f SRODATA dupok size=8
        0x0000 00 00 00 00 00 00 00 00                          ........
        rel 0+8 t=R_ADDR runtime.memequal64+0
runtime.gcbits.0100000000000000 SRODATA dupok size=8
        0x0000 01 00 00 00 00 00 00 00                          ........
type:.namedata.*atomic.Pointer[os.dirInfo]. SRODATA dupok size=29
        0x0000 01 1b 2a 61 74 6f 6d 69 63 2e 50 6f 69 6e 74 65  ..*atomic.Pointe
        0x0010 72 5b 6f 73 2e 64 69 72 49 6e 66 6f 5d           r[os.dirInfo]
type:.eqfunc.sync/atomic.Pointer[os.dirInfo] SRODATA dupok size=8
        0x0000 00 00 00 00 00 00 00 00                          ........
        rel 0+8 t=R_ADDR type:.eq.sync/atomic.Pointer[os.dirInfo]+0
runtime.memequal0·f SRODATA dupok size=8
        0x0000 00 00 00 00 00 00 00 00                          ........
        rel 0+8 t=R_ADDR runtime.memequal0+0
type:.namedata.*[0]*os.dirInfo- SRODATA dupok size=17
        0x0000 00 0f 2a 5b 30 5d 2a 6f 73 2e 64 69 72 49 6e 66  ..*[0]*os.dirInf
        0x0010 6f                                               o
type:*[0]*os.dirInfo SRODATA dupok size=56
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 a6 08 19 82 08 08 08 36 00 00 00 00 00 00 00 00  .......6........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 00 00 00 00 00 00 00 00                          ........
        rel 24+8 t=R_ADDR runtime.memequal64·f+0
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*[0]*os.dirInfo-+0
        rel 48+8 t=R_ADDR type:[0]*os.dirInfo+0
runtime.gcbits. SRODATA dupok size=0
type:.namedata.*[]*os.dirInfo- SRODATA dupok size=16
        0x0000 00 0e 2a 5b 5d 2a 6f 73 2e 64 69 72 49 6e 66 6f  ..*[]*os.dirInfo
type:*[]*os.dirInfo SRODATA dupok size=56
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 9d 8a 6c 8a 08 08 08 36 00 00 00 00 00 00 00 00  ..l....6........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 00 00 00 00 00 00 00 00                          ........
        rel 24+8 t=R_ADDR runtime.memequal64·f+0
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*[]*os.dirInfo-+0
        rel 48+8 t=R_ADDR type:[]*os.dirInfo+0
type:[]*os.dirInfo SRODATA dupok size=56
        0x0000 18 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 55 53 05 41 02 08 08 17 00 00 00 00 00 00 00 00  US.A............
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 00 00 00 00 00 00 00 00                          ........
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*[]*os.dirInfo-+0
        rel 44+4 t=RelocType(-32763) type:*[]*os.dirInfo+0
        rel 48+8 t=R_ADDR type:*os.dirInfo+0
type:[0]*os.dirInfo SRODATA dupok size=72
        0x0000 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0010 64 82 13 1a 0a 08 08 11 00 00 00 00 00 00 00 00  d...............
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0040 00 00 00 00 00 00 00 00                          ........
        rel 24+8 t=R_ADDR runtime.memequal0·f+0
        rel 32+8 t=R_ADDR runtime.gcbits.+0
        rel 40+4 t=R_ADDROFF type:.namedata.*[0]*os.dirInfo-+0
        rel 44+4 t=RelocType(-32763) type:*[0]*os.dirInfo+0
        rel 48+8 t=R_ADDR type:*os.dirInfo+0
        rel 56+8 t=R_ADDR type:[]*os.dirInfo+0
type:.importpath.sync/atomic. SRODATA dupok size=13
        0x0000 00 0b 73 79 6e 63 2f 61 74 6f 6d 69 63           ..sync/atomic
type:.namedata._- SRODATA dupok size=3
        0x0000 00 01 5f                                         .._
type:.namedata.v- SRODATA dupok size=3
        0x0000 00 01 76                                         ..v
type:sync/atomic.Pointer[os.dirInfo] SRODATA dupok size=168
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 96 c3 42 f6 07 08 08 19 00 00 00 00 00 00 00 00  ..B.............
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0040 03 00 00 00 00 00 00 00 03 00 00 00 00 00 00 00  ................
        0x0050 00 00 00 00 00 00 00 00 58 00 00 00 00 00 00 00  ........X.......
        0x0060 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0070 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0080 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0090 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x00a0 00 00 00 00 00 00 00 00                          ........
        rel 24+8 t=R_ADDR type:.eqfunc.sync/atomic.Pointer[os.dirInfo]+0
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*atomic.Pointer[os.dirInfo].+0
        rel 44+4 t=R_ADDROFF type:*sync/atomic.Pointer[os.dirInfo]+0
        rel 48+8 t=R_ADDR type:.importpath.sync/atomic.+0
        rel 56+8 t=R_ADDR type:sync/atomic.Pointer[os.dirInfo]+96
        rel 80+4 t=R_ADDROFF type:.importpath.sync/atomic.+0
        rel 96+8 t=R_ADDR type:.namedata._-+0
        rel 104+8 t=R_ADDR type:[0]*os.dirInfo+0
        rel 120+8 t=R_ADDR type:.namedata._-+0
        rel 128+8 t=R_ADDR type:sync/atomic.noCopy+0
        rel 144+8 t=R_ADDR type:.namedata.v-+0
        rel 152+8 t=R_ADDR type:unsafe.Pointer+0
type:.namedata.*func(*atomic.Pointer[os.dirInfo], *os.dirInfo, *os.dirInfo) bool- SRODATA dupok size=67
        0x0000 00 41 2a 66 75 6e 63 28 2a 61 74 6f 6d 69 63 2e  .A*func(*atomic.
        0x0010 50 6f 69 6e 74 65 72 5b 6f 73 2e 64 69 72 49 6e  Pointer[os.dirIn
        0x0020 66 6f 5d 2c 20 2a 6f 73 2e 64 69 72 49 6e 66 6f  fo], *os.dirInfo
        0x0030 2c 20 2a 6f 73 2e 64 69 72 49 6e 66 6f 29 20 62  , *os.dirInfo) b
        0x0040 6f 6f 6c                                         ool
type:*func(*sync/atomic.Pointer[os.dirInfo], *os.dirInfo, *os.dirInfo) bool SRODATA dupok size=56
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 fe 18 d0 29 08 08 08 36 00 00 00 00 00 00 00 00  ...)...6........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 00 00 00 00 00 00 00 00                          ........
        rel 24+8 t=R_ADDR runtime.memequal64·f+0
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*func(*atomic.Pointer[os.dirInfo], *os.dirInfo, *os.dirInfo) bool-+0
        rel 48+8 t=R_ADDR type:func(*sync/atomic.Pointer[os.dirInfo], *os.dirInfo, *os.dirInfo) bool+0
type:func(*sync/atomic.Pointer[os.dirInfo], *os.dirInfo, *os.dirInfo) bool SRODATA dupok size=88
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 b9 bc ac c6 02 08 08 33 00 00 00 00 00 00 00 00  .......3........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 03 00 01 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0040 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0050 00 00 00 00 00 00 00 00                          ........
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*func(*atomic.Pointer[os.dirInfo], *os.dirInfo, *os.dirInfo) bool-+0
        rel 44+4 t=RelocType(-32763) type:*func(*sync/atomic.Pointer[os.dirInfo], *os.dirInfo, *os.dirInfo) bool+0
        rel 56+8 t=R_ADDR type:*sync/atomic.Pointer[os.dirInfo]+0
        rel 64+8 t=R_ADDR type:*os.dirInfo+0
        rel 72+8 t=R_ADDR type:*os.dirInfo+0
        rel 80+8 t=R_ADDR type:bool+0
type:.namedata.*func(*atomic.Pointer[os.dirInfo]) *os.dirInfo- SRODATA dupok size=48
        0x0000 00 2e 2a 66 75 6e 63 28 2a 61 74 6f 6d 69 63 2e  ..*func(*atomic.
        0x0010 50 6f 69 6e 74 65 72 5b 6f 73 2e 64 69 72 49 6e  Pointer[os.dirIn
        0x0020 66 6f 5d 29 20 2a 6f 73 2e 64 69 72 49 6e 66 6f  fo]) *os.dirInfo
type:*func(*sync/atomic.Pointer[os.dirInfo]) *os.dirInfo SRODATA dupok size=56
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 59 bb 31 13 08 08 08 36 00 00 00 00 00 00 00 00  Y.1....6........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 00 00 00 00 00 00 00 00                          ........
        rel 24+8 t=R_ADDR runtime.memequal64·f+0
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*func(*atomic.Pointer[os.dirInfo]) *os.dirInfo-+0
        rel 48+8 t=R_ADDR type:func(*sync/atomic.Pointer[os.dirInfo]) *os.dirInfo+0
type:func(*sync/atomic.Pointer[os.dirInfo]) *os.dirInfo SRODATA dupok size=72
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 d5 d6 af 2f 02 08 08 33 00 00 00 00 00 00 00 00  .../...3........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 01 00 01 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0040 00 00 00 00 00 00 00 00                          ........
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*func(*atomic.Pointer[os.dirInfo]) *os.dirInfo-+0
        rel 44+4 t=RelocType(-32763) type:*func(*sync/atomic.Pointer[os.dirInfo]) *os.dirInfo+0
        rel 56+8 t=R_ADDR type:*sync/atomic.Pointer[os.dirInfo]+0
        rel 64+8 t=R_ADDR type:*os.dirInfo+0
type:.namedata.*func(*atomic.Pointer[os.dirInfo], *os.dirInfo)- SRODATA dupok size=49
        0x0000 00 2f 2a 66 75 6e 63 28 2a 61 74 6f 6d 69 63 2e  ./*func(*atomic.
        0x0010 50 6f 69 6e 74 65 72 5b 6f 73 2e 64 69 72 49 6e  Pointer[os.dirIn
        0x0020 66 6f 5d 2c 20 2a 6f 73 2e 64 69 72 49 6e 66 6f  fo], *os.dirInfo
        0x0030 29                                               )
type:*func(*sync/atomic.Pointer[os.dirInfo], *os.dirInfo) SRODATA dupok size=56
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 73 91 45 a4 08 08 08 36 00 00 00 00 00 00 00 00  s.E....6........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 00 00 00 00 00 00 00 00                          ........
        rel 24+8 t=R_ADDR runtime.memequal64·f+0
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*func(*atomic.Pointer[os.dirInfo], *os.dirInfo)-+0
        rel 48+8 t=R_ADDR type:func(*sync/atomic.Pointer[os.dirInfo], *os.dirInfo)+0
type:func(*sync/atomic.Pointer[os.dirInfo], *os.dirInfo) SRODATA dupok size=72
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 a7 d9 da 27 02 08 08 33 00 00 00 00 00 00 00 00  ...'...3........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 02 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0040 00 00 00 00 00 00 00 00                          ........
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*func(*atomic.Pointer[os.dirInfo], *os.dirInfo)-+0
        rel 44+4 t=RelocType(-32763) type:*func(*sync/atomic.Pointer[os.dirInfo], *os.dirInfo)+0
        rel 56+8 t=R_ADDR type:*sync/atomic.Pointer[os.dirInfo]+0
        rel 64+8 t=R_ADDR type:*os.dirInfo+0
type:.namedata.*func(*atomic.Pointer[os.dirInfo], *os.dirInfo) *os.dirInfo- SRODATA dupok size=61
        0x0000 00 3b 2a 66 75 6e 63 28 2a 61 74 6f 6d 69 63 2e  .;*func(*atomic.
        0x0010 50 6f 69 6e 74 65 72 5b 6f 73 2e 64 69 72 49 6e  Pointer[os.dirIn
        0x0020 66 6f 5d 2c 20 2a 6f 73 2e 64 69 72 49 6e 66 6f  fo], *os.dirInfo
        0x0030 29 20 2a 6f 73 2e 64 69 72 49 6e 66 6f           ) *os.dirInfo
type:*func(*sync/atomic.Pointer[os.dirInfo], *os.dirInfo) *os.dirInfo SRODATA dupok size=56
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 46 0b cc 77 08 08 08 36 00 00 00 00 00 00 00 00  F..w...6........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 00 00 00 00 00 00 00 00                          ........
        rel 24+8 t=R_ADDR runtime.memequal64·f+0
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*func(*atomic.Pointer[os.dirInfo], *os.dirInfo) *os.dirInfo-+0
        rel 48+8 t=R_ADDR type:func(*sync/atomic.Pointer[os.dirInfo], *os.dirInfo) *os.dirInfo+0
type:func(*sync/atomic.Pointer[os.dirInfo], *os.dirInfo) *os.dirInfo SRODATA dupok size=80
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 3a 47 9e 50 02 08 08 33 00 00 00 00 00 00 00 00  :G.P...3........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 02 00 01 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0040 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*func(*atomic.Pointer[os.dirInfo], *os.dirInfo) *os.dirInfo-+0
        rel 44+4 t=RelocType(-32763) type:*func(*sync/atomic.Pointer[os.dirInfo], *os.dirInfo) *os.dirInfo+0
        rel 56+8 t=R_ADDR type:*sync/atomic.Pointer[os.dirInfo]+0
        rel 64+8 t=R_ADDR type:*os.dirInfo+0
        rel 72+8 t=R_ADDR type:*os.dirInfo+0
type:.namedata.CompareAndSwap. SRODATA dupok size=16
        0x0000 01 0e 43 6f 6d 70 61 72 65 41 6e 64 53 77 61 70  ..CompareAndSwap
type:.namedata.*func(*os.dirInfo, *os.dirInfo) bool- SRODATA dupok size=38
        0x0000 00 24 2a 66 75 6e 63 28 2a 6f 73 2e 64 69 72 49  .$*func(*os.dirI
        0x0010 6e 66 6f 2c 20 2a 6f 73 2e 64 69 72 49 6e 66 6f  nfo, *os.dirInfo
        0x0020 29 20 62 6f 6f 6c                                ) bool
type:*func(*os.dirInfo, *os.dirInfo) bool SRODATA dupok size=56
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 5e 6b 53 61 08 08 08 36 00 00 00 00 00 00 00 00  ^kSa...6........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 00 00 00 00 00 00 00 00                          ........
        rel 24+8 t=R_ADDR runtime.memequal64·f+0
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*func(*os.dirInfo, *os.dirInfo) bool-+0
        rel 48+8 t=R_ADDR type:func(*os.dirInfo, *os.dirInfo) bool+0
type:func(*os.dirInfo, *os.dirInfo) bool SRODATA dupok size=80
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 48 9c 04 10 02 08 08 33 00 00 00 00 00 00 00 00  H......3........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 02 00 01 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0040 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*func(*os.dirInfo, *os.dirInfo) bool-+0
        rel 44+4 t=RelocType(-32763) type:*func(*os.dirInfo, *os.dirInfo) bool+0
        rel 56+8 t=R_ADDR type:*os.dirInfo+0
        rel 64+8 t=R_ADDR type:*os.dirInfo+0
        rel 72+8 t=R_ADDR type:bool+0
type:.namedata.Load. SRODATA dupok size=6
        0x0000 01 04 4c 6f 61 64                                ..Load
type:.namedata.*func() *os.dirInfo- SRODATA dupok size=21
        0x0000 00 13 2a 66 75 6e 63 28 29 20 2a 6f 73 2e 64 69  ..*func() *os.di
        0x0010 72 49 6e 66 6f                                   rInfo
type:*func() *os.dirInfo SRODATA dupok size=56
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 9f 33 b3 3d 08 08 08 36 00 00 00 00 00 00 00 00  .3.=...6........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 00 00 00 00 00 00 00 00                          ........
        rel 24+8 t=R_ADDR runtime.memequal64·f+0
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*func() *os.dirInfo-+0
        rel 48+8 t=R_ADDR type:func() *os.dirInfo+0
type:func() *os.dirInfo SRODATA dupok size=64
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 e2 f6 62 43 02 08 08 33 00 00 00 00 00 00 00 00  ..bC...3........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 00 00 01 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*func() *os.dirInfo-+0
        rel 44+4 t=RelocType(-32763) type:*func() *os.dirInfo+0
        rel 56+8 t=R_ADDR type:*os.dirInfo+0
type:.namedata.Store. SRODATA dupok size=7
        0x0000 01 05 53 74 6f 72 65                             ..Store
type:.namedata.*func(*os.dirInfo)- SRODATA dupok size=20
        0x0000 00 12 2a 66 75 6e 63 28 2a 6f 73 2e 64 69 72 49  ..*func(*os.dirI
        0x0010 6e 66 6f 29                                      nfo)
type:*func(*os.dirInfo) SRODATA dupok size=56
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 bc 37 80 49 08 08 08 36 00 00 00 00 00 00 00 00  .7.I...6........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 00 00 00 00 00 00 00 00                          ........
        rel 24+8 t=R_ADDR runtime.memequal64·f+0
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*func(*os.dirInfo)-+0
        rel 48+8 t=R_ADDR type:func(*os.dirInfo)+0
type:func(*os.dirInfo) SRODATA dupok size=64
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 0f ea 90 93 02 08 08 33 00 00 00 00 00 00 00 00  .......3........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*func(*os.dirInfo)-+0
        rel 44+4 t=RelocType(-32763) type:*func(*os.dirInfo)+0
        rel 56+8 t=R_ADDR type:*os.dirInfo+0
type:.namedata.Swap. SRODATA dupok size=6
        0x0000 01 04 53 77 61 70                                ..Swap
type:.namedata.*func(*os.dirInfo) *os.dirInfo- SRODATA dupok size=32
        0x0000 00 1e 2a 66 75 6e 63 28 2a 6f 73 2e 64 69 72 49  ..*func(*os.dirI
        0x0010 6e 66 6f 29 20 2a 6f 73 2e 64 69 72 49 6e 66 6f  nfo) *os.dirInfo
type:*func(*os.dirInfo) *os.dirInfo SRODATA dupok size=56
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 ab 76 75 e5 08 08 08 36 00 00 00 00 00 00 00 00  .vu....6........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 00 00 00 00 00 00 00 00                          ........
        rel 24+8 t=R_ADDR runtime.memequal64·f+0
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*func(*os.dirInfo) *os.dirInfo-+0
        rel 48+8 t=R_ADDR type:func(*os.dirInfo) *os.dirInfo+0
type:func(*os.dirInfo) *os.dirInfo SRODATA dupok size=72
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 63 31 bc d9 02 08 08 33 00 00 00 00 00 00 00 00  c1.....3........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 01 00 01 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0040 00 00 00 00 00 00 00 00                          ........
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*func(*os.dirInfo) *os.dirInfo-+0
        rel 44+4 t=RelocType(-32763) type:*func(*os.dirInfo) *os.dirInfo+0
        rel 56+8 t=R_ADDR type:*os.dirInfo+0
        rel 64+8 t=R_ADDR type:*os.dirInfo+0
type:*sync/atomic.Pointer[os.dirInfo] SRODATA dupok size=136
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 53 db c0 f4 09 08 08 36 00 00 00 00 00 00 00 00  S......6........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 00 00 00 00 00 00 00 00 00 00 00 00 04 00 04 00  ................
        0x0040 10 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0050 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0060 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0070 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0080 00 00 00 00 00 00 00 00                          ........
        rel 24+8 t=R_ADDR runtime.memequal64·f+0
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*atomic.Pointer[os.dirInfo].+0
        rel 48+8 t=R_ADDR type:sync/atomic.Pointer[os.dirInfo]+0
        rel 56+4 t=R_ADDROFF type:.importpath.sync/atomic.+0
        rel 72+4 t=R_ADDROFF type:.namedata.CompareAndSwap.+0
        rel 76+4 t=R_METHODOFF type:func(*os.dirInfo, *os.dirInfo) bool+0
        rel 80+4 t=R_METHODOFF sync/atomic.(*Pointer[os.dirInfo]).CompareAndSwap+0
        rel 84+4 t=R_METHODOFF sync/atomic.(*Pointer[os.dirInfo]).CompareAndSwap+0
        rel 88+4 t=R_ADDROFF type:.namedata.Load.+0
        rel 92+4 t=R_METHODOFF type:func() *os.dirInfo+0
        rel 96+4 t=R_METHODOFF sync/atomic.(*Pointer[os.dirInfo]).Load+0
        rel 100+4 t=R_METHODOFF sync/atomic.(*Pointer[os.dirInfo]).Load+0
        rel 104+4 t=R_ADDROFF type:.namedata.Store.+0
        rel 108+4 t=R_METHODOFF type:func(*os.dirInfo)+0
        rel 112+4 t=R_METHODOFF sync/atomic.(*Pointer[os.dirInfo]).Store+0
        rel 116+4 t=R_METHODOFF sync/atomic.(*Pointer[os.dirInfo]).Store+0
        rel 120+4 t=R_ADDROFF type:.namedata.Swap.+0
        rel 124+4 t=R_METHODOFF type:func(*os.dirInfo) *os.dirInfo+0
        rel 128+4 t=R_METHODOFF sync/atomic.(*Pointer[os.dirInfo]).Swap+0
        rel 132+4 t=R_METHODOFF sync/atomic.(*Pointer[os.dirInfo]).Swap+0
go:string."Hello World" SRODATA dupok size=11
        0x0000 48 65 6c 6c 6f 20 57 6f 72 6c 64                 Hello World
main..stmp_0 SRODATA static size=16
        0x0000 00 00 00 00 00 00 00 00 0b 00 00 00 00 00 00 00  ................
        rel 0+8 t=R_ADDR go:string."Hello World"+0
runtime.nilinterequal·f SRODATA dupok size=8
        0x0000 00 00 00 00 00 00 00 00                          ........
        rel 0+8 t=R_ADDR runtime.nilinterequal+0
type:.namedata.*[1]interface {}- SRODATA dupok size=18
        0x0000 00 10 2a 5b 31 5d 69 6e 74 65 72 66 61 63 65 20  ..*[1]interface 
        0x0010 7b 7d                                            {}
type:*[1]interface {} SRODATA dupok size=56
        0x0000 08 00 00 00 00 00 00 00 08 00 00 00 00 00 00 00  ................
        0x0010 73 3b a6 1c 08 08 08 36 00 00 00 00 00 00 00 00  s;.....6........
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 00 00 00 00 00 00 00 00                          ........
        rel 24+8 t=R_ADDR runtime.memequal64·f+0
        rel 32+8 t=R_ADDR runtime.gcbits.0100000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*[1]interface {}-+0
        rel 48+8 t=R_ADDR type:[1]interface {}+0
runtime.gcbits.0200000000000000 SRODATA dupok size=8
        0x0000 02 00 00 00 00 00 00 00                          ........
type:[1]interface {} SRODATA dupok size=72
        0x0000 10 00 00 00 00 00 00 00 10 00 00 00 00 00 00 00  ................
        0x0010 ea 37 5e 5e 02 08 08 11 00 00 00 00 00 00 00 00  .7^^............
        0x0020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0030 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        0x0040 01 00 00 00 00 00 00 00                          ........
        rel 24+8 t=R_ADDR runtime.nilinterequal·f+0
        rel 32+8 t=R_ADDR runtime.gcbits.0200000000000000+0
        rel 40+4 t=R_ADDROFF type:.namedata.*[1]interface {}-+0
        rel 44+4 t=RelocType(-32763) type:*[1]interface {}+0
        rel 48+8 t=R_ADDR type:interface {}+0
        rel 56+8 t=R_ADDR type:[]interface {}+0
gclocals·FzY36IO2mY0y4dZ1+Izd/w== SRODATA dupok size=8
        0x0000 01 00 00 00 00 00 00 00                          ........
gclocals·ynuM6ptGWxUYldU3ztZ9GQ== SRODATA dupok size=9
        0x0000 01 00 00 00 02 00 00 00 00                       .........
main.main.stkobj SRODATA static size=24
        0x0000 01 00 00 00 00 00 00 00 f0 ff ff ff 10 00 00 00  ................
        0x0010 10 00 00 00 00 00 00 00                          ........
        rel 20+4 t=R_ADDROFF runtime.gcbits.0200000000000000+0
gclocals·rJbr+btbFJy3NLIRCgNSZQ== SRODATA dupok size=10
        0x0000 02 00 00 00 02 00 00 00 03 00                    ..........
gclocals·ISb46fRPFoZ9pIfykFK/kQ== SRODATA dupok size=8
        0x0000 02 00 00 00 00 00 00 00                          ........
type:.eq.sync/atomic.Pointer[os.dirInfo].arginfo1 SRODATA static dupok size=3
        0x0000 08 08 ff                                         ...
type:.eq.sync/atomic.Pointer[os.dirInfo].argliveinfo SRODATA static dupok size=2
        0x0000 00 00                                            ..

```

### 链接

![](image/Pasted%20image%2020250305181248.png)

## 总结

- 探究汇编，底层原理
- 出现意想不到的情况，解决

![](image/Pasted%20image%2020250305181341.png)

# Go 是如何运行的

## Go 程序的入口

![](image/Pasted%20image%2020250305191453.png)

这里就是启动的入口，保存启动参数，然后跳转初始化函数

![](image/Pasted%20image%2020250305191112.png)

 ## 读取命令行参数
 
![](image/Pasted%20image%2020250305191721.png)

保存后跳转到启动函数

![](image/Pasted%20image%2020250305191757.png)

## 初始化 g0 执行栈

![](image/Pasted%20image%2020250305192852.png)

这里不深究，知道就行

![](image/Pasted%20image%2020250305192047.png)

## 运行时检测

![](image/Pasted%20image%2020250305192934.png)

这里就调用到 Go 了

![](image/Pasted%20image%2020250305192242.png)

![](image/Pasted%20image%2020250305193229.png)

## 参数初始化 runtime·args

![](image/Pasted%20image%2020250305193649.png)

![](image/Pasted%20image%2020250305193613.png)

## 系统参数初始化 runtime·osinit

一些系统参数，CPU 核心数，什么操作系统

![](image/Pasted%20image%2020250305193845.png)

## 调度器初始化 runtime·schedinit

![](image/Pasted%20image%2020250305194016.png)

![](image/Pasted%20image%2020250305193951.png)

## 创建主协程

![](image/Pasted%20image%2020250305195348.png)

## 初始化 M

![](image/Pasted%20image%2020250305195547.png)

这里的 mainPC 并不是我们编写程序的初始地址，是 runtime.main 的地址，调用了 newproc 这是 Go 创建协程的方法，也就是使用协程来运行 runtime.main ，但是还没有调度，后面有注释写着 start this m ，这是调度器的概念，初始化了调度器的 m ，我们创建的协程，就真正的执行，启动就告一段落，后面就运行 runtime.main，我们现在有两个协程 一个负责 g0，一个执行runtime.main

![](image/Pasted%20image%2020250305194205.png)

![](image/Pasted%20image%2020250305194216.png)

## 主协程执行主函数

![](image/Pasted%20image%2020250305200436.png)

这个方法就从汇编世界到了 Go 的世界，然后执行初始化后执行程序猿写的代码

![](image/Pasted%20image%2020250305200116.png)


```go
func main() {  
    mp := getg().m  
  
    // Racectx of m0->g0 is used only as the parent of the main goroutine.  
    // It must not be used for anything else.    mp.g0.racectx = 0  
  
    // Max stack size is 1 GB on 64-bit, 250 MB on 32-bit.  
    // Using decimal instead of binary GB and MB because    // they look nicer in the stack overflow failure message.    if goarch.PtrSize == 8 {  
       maxstacksize = 1000000000  
    } else {  
       maxstacksize = 250000000  
    }  
  
    // An upper limit for max stack size. Used to avoid random crashes  
    // after calling SetMaxStack and trying to allocate a stack that is too big,    // since stackalloc works with 32-bit sizes.    maxstackceiling = 2 * maxstacksize  
  
    // Allow newproc to start new Ms.  
    mainStarted = true  
  
    if haveSysmon {  
       systemstack(func() {  
          newm(sysmon, nil, -1)  
       })  
    }  
  
    // Lock the main goroutine onto this, the main OS thread,  
    // during initialization. Most programs won't care, but a few    // do require certain calls to be made by the main thread.    // Those can arrange for main.main to run in the main thread    // by calling runtime.LockOSThread during initialization    // to preserve the lock.    lockOSThread()  
  
    if mp != &m0 {  
       throw("runtime.main not on m0")  
    }  
  
    // Record when the world started.  
    // Must be before doInit for tracing init.    runtimeInitTime = nanotime()  
    if runtimeInitTime == 0 {  
       throw("nanotime returning zero")  
    }  
  
    if debug.inittrace != 0 {  
       inittrace.id = getg().goid  
       inittrace.active = true  
    }  
  
    doInit(runtime_inittasks) // Must be before defer.  
  
    // Defer unlock so that runtime.Goexit during init does the unlock too.    needUnlock := true  
    defer func() {  
       if needUnlock {  
          unlockOSThread()  
       }  
    }()  
  
    gcenable()  
  
    main_init_done = make(chan bool)  
    if iscgo {  
       if _cgo_pthread_key_created == nil {  
          throw("_cgo_pthread_key_created missing")  
       }  
  
       if _cgo_thread_start == nil {  
          throw("_cgo_thread_start missing")  
       }  
       if GOOS != "windows" {  
          if _cgo_setenv == nil {  
             throw("_cgo_setenv missing")  
          }  
          if _cgo_unsetenv == nil {  
             throw("_cgo_unsetenv missing")  
          }  
       }  
       if _cgo_notify_runtime_init_done == nil {  
          throw("_cgo_notify_runtime_init_done missing")  
       }  
  
       // Set the x_crosscall2_ptr C function pointer variable point to crosscall2.  
       if set_crosscall2 == nil {  
          throw("set_crosscall2 missing")  
       }  
       set_crosscall2()  
  
       // Start the template thread in case we enter Go from  
       // a C-created thread and need to create a new thread.       startTemplateThread()  
       cgocall(_cgo_notify_runtime_init_done, nil)  
    }  
  
    // Run the initializing tasks. Depending on build mode this  
    // list can arrive a few different ways, but it will always    // contain the init tasks computed by the linker for all the    // packages in the program (excluding those added at runtime    // by package plugin). Run through the modules in dependency    // order (the order they are initialized by the dynamic    // loader, i.e. they are added to the moduledata linked list).    for m := &firstmoduledata; m != nil; m = m.next {  
       doInit(m.inittasks)  
    }  
  
    // Disable init tracing after main init done to avoid overhead  
    // of collecting statistics in malloc and newproc    inittrace.active = false  
  
    close(main_init_done)  
  
    needUnlock = false  
    unlockOSThread()  
  
    if isarchive || islibrary {  
       // A program compiled with -buildmode=c-archive or c-shared  
       // has a main, but it is not executed.       if GOARCH == "wasm" {  
          // On Wasm, pause makes it return to the host.  
          // Unlike cgo callbacks where Ms are created on demand,          // on Wasm we have only one M. So we keep this M (and this          // G) for callbacks.          // Using the caller's SP unwinds this frame and backs to          // goexit. The -16 is: 8 for goexit's (fake) return PC,          // and pause's epilogue pops 8.          pause(sys.GetCallerSP() - 16) // should not return  
          panic("unreachable")  
       }  
       return  
    }  

//  这里就是我们自己写的函数入口，在编译时通过 //go:linkname main_main main.main 获取程序入口地址

    fn := main_main // make an indirect call, as the linker doesn't know the address of the main package when laying down the runtime  
    fn()  
    if raceenabled {  
       runExitHooks(0) // run hooks now, since racefini does not return  
       racefini()  
    }  
  
    // Make racy client program work: if panicking on  
    // another goroutine at the same time as main returns,    // let the other goroutine finish printing the panic trace.    // Once it does, it will exit. See issues 3934 and 20018.    if runningPanicDefers.Load() != 0 {  
       // Running deferred functions should not take long.  
       for c := 0; c < 1000; c++ {  
          if runningPanicDefers.Load() == 0 {  
             break  
          }  
          Gosched()  
       }  
    }  
    if panicking.Load() != 0 {  
       gopark(nil, nil, waitReasonPanicWait, traceBlockForever, 1)  
    }  
    runExitHooks(0)  
  
    exit(0)  
    for {  
       var x *int32  
       *x = 0  
    }  
}  

```

## 总结

![](image/Pasted%20image%2020250305200652.png)

## 问题

![](image/Pasted%20image%2020250305200736.png)

## 体会

![](image/Pasted%20image%2020250305200856.png)

# Go 语言是面向对象吗

## Yes and NO

![](image/Pasted%20image%2020250305201306.png)

来源自 Go.dev

![](image/Pasted%20image%2020250305201030.png)

## Go 的类

![](image/Pasted%20image%2020250305201411.png)

## Go 的继承


```go
type People struct {
	name string
}

type Man struct {
	People // 这就是匿名字段，没有名字
}

func (p *People) walk () {
	
}

// 通过 m := Man{} , m.walk 也可以使用，不过是 m.People.walk()

```


![](image/Pasted%20image%2020250305201553.png)

## Go 的接口

![](image/Pasted%20image%2020250305202137.png)

## 总结

![](image/Pasted%20image%2020250305202238.png)

# Go 的包管理

## 困境

![](image/Pasted%20image%2020250305202314.png)

## 尝试解决

![](image/Pasted%20image%2020250305202355.png)

## Go Modules

![](image/Pasted%20image%2020250305202702.png)

### 使用

![](image/Pasted%20image%2020250305202737.png)


```shell
go get github.com/Jeffail/tunny
```

### Github 无法访问咋办

![](image/Pasted%20image%2020250305211020.png)

### 本地文件替代

![](image/Pasted%20image%2020250305211108.png)

### 如何创建

![](image/Pasted%20image%2020250305211349.png)

## 总结

![](image/Pasted%20image%2020250305211420.png)